#!/usr/bin/env python3

import shutil, subprocess, sys

test = 'ltest' if shutil.which('cargo-ltest') else 'test'

with open('blacklist.txt') as f:
  blacklist = f.read().splitlines()

command = ['cargo', test, '--', '--exact']

for test in blacklist:
  command.append('--skip')
  command.append(test)

sys.exit(subprocess.run(command).returncode)
